{
  "timestamp": "20260117_213735",
  "model_name": "google/gemma-2-2b-it",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": "qa_workflow",
  "gpu_info": {
    "cuda_available": true,
    "cuda_version": "12.1",
    "gpu_name": "NVIDIA GeForce RTX 4060 Laptop GPU",
    "gpu_memory_total_gb": 8.0,
    "gpu_memory_allocated_gb": 0.0,
    "gpu_memory_reserved_gb": 0.0,
    "gpu_name_detailed": "NVIDIA GeForce RTX 4060 Laptop GPU",
    "driver_version": "591.74"
  },
  "gpu_memory_after_load_gb": 4.87,
  "gpu_memory_during_inference_gb": 4.88,
  "gpu_memory_during_inference_max_gb": 4.88,
  "gpu_memory_during_inference_min_gb": 4.88,
  "api_model": false,
  "average_response_time_seconds": 27.730938067436217,
  "parsing_error_rate": 0.0,
  "parsing_errors_count": 0,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.0,
      "precision": 0.0,
      "recall": 0.0,
      "f1": 0.0,
      "tp": 0,
      "fp": 0,
      "fn": 279,
      "количество_сравнений": 84,
      "ошибки": [
        "Вещество P2O5: предсказано отсутствует, истина [19.0, 21.0]",
        "Вещество N: предсказано отсутствует, истина [7.0, 9.0]",
        "Вещество K2O: предсказано отсутствует, истина [29.0, 31.0]",
        "Вещество S: предсказано отсутствует, истина [2.0, None]",
        "Вещество SO4: предсказано отсутствует, истина 52.5",
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество K2O: предсказано отсутствует, истина 50.0",
        "Вещество P2O5: предсказано отсутствует, истина 10.0",
        "Вещество N: предсказано отсутствует, истина 20.0",
        "Вещество K2O: предсказано отсутствует, истина 10.0"
      ]
    },
    "прочее": {
      "средняя_точность": 0.1459563994374121,
      "precision": 0.4918032786885246,
      "recall": 0.14492753623188406,
      "f1": 0.2238805970149254,
      "tp": 30,
      "fp": 31,
      "fn": 177,
      "количество_сравнений": 79,
      "ошибки": [
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.52-089-05785164-2022",
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.71-142-05015182-2017",
        "Параметр масса нетто единицы: предсказано 8.0, истина отсутствует",
        "Параметр марка: предсказано отсутствует, истина npks-8 (npk 8:20:30)",
        "Параметр масса нетто единицы: предсказано 1000.0, истина отсутствует",
        "Параметр масса брутто: предсказано отсутствует, истина 1050.0",
        "Параметр масса нетто единицы: предсказано 1035000.0, истина отсутствует",
        "Параметр количество вагонов: предсказано отсутствует, истина 15.0",
        "Параметр масса нетто: предсказано отсутствует, истина 1035000.0",
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.71-031-00206486-2023"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 512,
    "do_sample": false,
    "torch_dtype": "bfloat16",
    "multi_agent_mode": "qa_workflow"
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "МУЛЬТИАГЕНТНЫЙ РЕЖИМ: qa_workflow\n\n================================================================================\nПРОМПТ 1: ИЗВЛЕЧЕНИЕ ПИТАТЕЛЬНЫХ ВЕЩЕСТВ\n================================================================================\n\nТекст: КАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос: Какие действующие вещества (питательные элементы или их соединения) указаны в этом удобрении? Извлекай только те, что относятся к агрохимическому составу:  \n— Азот как N,  \n— Фосфор как P2O5,  \n— Калий как K2O,  \n— Сера как S,  \n— Кальций как Ca,  \n— Магний как Mg,  \n— Цинк как Zn,  \n— и другие макро-/микроэлементы в стандартной форме.  \n\nЕсли в марке указано, например, \"N7-P20-K30\", извлекай: N, P2O5, K2O.  \nЕсли сказано \"K в пересчёте на K2O\" — указывай K2O.  \nНе включай упаковку, стандарты, массу, объём.\n\nОтвет должен быть строго списком строк в формате JSON. Примеры:\n\nТекст: Удобрение NPK 16-20-20 содержит азот, фосфор (в виде P2O5) и калий (в виде K2O).\nОтвет: [\"N\", \"P2O5\", \"K2O\"]\n\nТекст: Марка N7-P20-K30-S3\nОтвет: [\"N\", \"P2O5\", \"K2O\", \"S\"]\n\nТекст: Гранулированное удобрение в мешках по 50 кг. Соответствует ТУ 12345.\nОтвет: []\n\nВыведи ответ после слова ОТВЕТ:.\n\n\n================================================================================\nПРОМПТ 2: ИЗВЛЕЧЕНИЕ МАССОВЫХ ДОЛЕЙ (для каждого вещества)\n================================================================================\n\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакова массовая доля N в удобрении? Учти, что:\n- Если указано \"K в пересчёте на K2O\" — это означает массовую долю K2O.\n- Если значение дано как диапазон (например, \"8–10\" или \"от 6 до 12\"), верни [min, max].\n- Если указано \"не менее X\" — верни [X, null].\n- Если указано \"не более X\" — верни [null, X].\n- Если значение одно — верни число (например, 20).\n- Используй точку как десятичный разделитель.\n- Если информации нет — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": число | [min, max] | [число, null] | [null, число] | null}\n\nВыведи ответ после слова ОТВЕТ:.\n\n\n================================================================================\nПРОМПТ 3: ИЗВЛЕЧЕНИЕ СТАНДАРТА\n================================================================================\n\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакой стандарт (ГОСТ, ТУ, СТО или другой нормативный документ) указан для этого удобрения?  \nЕсли стандарт не указан — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": \"полное название стандарта, например: ТУ 2184-037-32496445-02\" | null}\n\nВыведи ответ после слова ОТВЕТ:.\n\n\n================================================================================\nПРОМПТ 4: ИЗВЛЕЧЕНИЕ МАРКИ\n================================================================================\n\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакая марка удобрения указана (например, N7-P20-K30-S3)?  \nЕсли марка не указана — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": \"марка\" | null}\n\nВыведи ответ после слова ОТВЕТ:.\n\n\n================================================================================\nПРОМПТ 5: ИЗВЛЕЧЕНИЕ КОЛИЧЕСТВ\n================================================================================\n\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакое количество товара указано в тексте? Это может быть:\n- масса (в кг, т и др.),\n- объём (в л, м³ и др.),\n- число упаковок (мешков, канистр, вагонов, поддонов, паллет и т.д.),\n- любая другая числовая характеристика количества.\n\nИзвлеки:\n1. **Числовое значение** (если указано \"1000 мешков\" → 1000; \"5 т\" → 5; \"мешки по 50 кг\" → 50).\n2. **Единицу измерения** (например: \"кг\", \"т\", \"шт\", \"меш\", \"вагон\", \"л\", \"паллета\" и т.д. — как в тексте, но в нижнем регистре и без сокращений типа \"п/э\").\n3. Если указан допуск (например, \"+5%\"), учти его: \"1000 кг+5%\" → 1050.\n\nПравила:\n- Извлекай **только то, что явно указано**.\n- Не суммируй, не интерполируй, не вычисляй общее количество, если оно не дано напрямую.\n- Если количество не указано — верни null.\n\nОтвет должен быть строго в формате JSON:\n{\"значение\": число | null, \"единица\": строка | null}\n\nВыведи ответ после слова ОТВЕТ:.\n\n\n================================================================================\nПРОМПТ 6: СБОРКА ФИНАЛЬНОГО JSON\n================================================================================\n(Автоматическая сборка из всех извлеченных данных)\n",
  "prompt_info": {
    "mode": "qa_workflow",
    "prompts_used": [
      "QA_NUTRIENTS_PROMPT",
      "QA_NUTRIENT_PROMPT",
      "QA_STANDARD_PROMPT",
      "QA_GRADE_PROMPT",
      "QA_QUANTITY_PROMPT"
    ],
    "example_nutrients_prompt": "\nТекст: КАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос: Какие действующие вещества (питательные элементы или их соединения) указаны в этом удобрении? Извлекай только те, что относятся к агрохимическому составу:  \n— Азот как N,  \n— Фосфор как P2O5,  \n— Калий как K2O,  \n— Сера как S,  \n— Кальций как Ca,  \n— Магний как Mg,  \n— Цинк как Zn,  \n— и другие макро-/микроэлементы в стандартной форме.  \n\nЕсли в марке указано, например, \"N7-P20-K30\", извлекай: N, P2O5, K2O.  \nЕсли сказано \"K в пересчёте на K2O\" — указывай K2O.  \nНе включай упаковку, стандарты, массу, объём.\n\nОтвет должен быть строго списком строк в формате JSON. Примеры:\n\nТекст: Удобрение NPK 16-20-20 содержит азот, фосфор (в виде P2O5) и калий (в виде K2O).\nОтвет: [\"N\", \"P2O5\", \"K2O\"]\n\nТекст: Марка N7-P20-K30-S3\nОтвет: [\"N\", \"P2O5\", \"K2O\", \"S\"]\n\nТекст: Гранулированное удобрение в мешках по 50 кг. Соответствует ТУ 12345.\nОтвет: []\n\nВыведи ответ после слова ОТВЕТ:.\n",
    "example_nutrient_prompt": "\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакова массовая доля N в удобрении? Учти, что:\n- Если указано \"K в пересчёте на K2O\" — это означает массовую долю K2O.\n- Если значение дано как диапазон (например, \"8–10\" или \"от 6 до 12\"), верни [min, max].\n- Если указано \"не менее X\" — верни [X, null].\n- Если указано \"не более X\" — верни [null, X].\n- Если значение одно — верни число (например, 20).\n- Используй точку как десятичный разделитель.\n- Если информации нет — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": число | [min, max] | [число, null] | [null, число] | null}\n\nВыведи ответ после слова ОТВЕТ:.\n",
    "example_standard_prompt": "\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакой стандарт (ГОСТ, ТУ, СТО или другой нормативный документ) указан для этого удобрения?  \nЕсли стандарт не указан — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": \"полное название стандарта, например: ТУ 2184-037-32496445-02\" | null}\n\nВыведи ответ после слова ОТВЕТ:.\n",
    "example_grade_prompt": "\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакая марка удобрения указана (например, N7-P20-K30-S3)?  \nЕсли марка не указана — верни null.\n\nОтвет должен быть только в формате JSON:\n{\"значение\": \"марка\" | null}\n\nВыведи ответ после слова ОТВЕТ:.\n",
    "example_quantity_prompt": "\nКонтекст:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\nВопрос:\nКакое количество товара указано в тексте? Это может быть:\n- масса (в кг, т и др.),\n- объём (в л, м³ и др.),\n- число упаковок (мешков, канистр, вагонов, поддонов, паллет и т.д.),\n- любая другая числовая характеристика количества.\n\nИзвлеки:\n1. **Числовое значение** (если указано \"1000 мешков\" → 1000; \"5 т\" → 5; \"мешки по 50 кг\" → 50).\n2. **Единицу измерения** (например: \"кг\", \"т\", \"шт\", \"меш\", \"вагон\", \"л\", \"паллета\" и т.д. — как в тексте, но в нижнем регистре и без сокращений типа \"п/э\").\n3. Если указан допуск (например, \"+5%\"), учти его: \"1000 кг+5%\" → 1050.\n\nПравила:\n- Извлекай **только то, что явно указано**.\n- Не суммируй, не интерполируй, не вычисляй общее количество, если оно не дано напрямую.\n- Если количество не указано — верни null.\n\nОтвет должен быть строго в формате JSON:\n{\"значение\": число | null, \"единица\": строка | null}\n\nВыведи ответ после слова ОТВЕТ:.\n"
  },
  "parsing_errors": [],
  "total_samples": 100,
  "valid_json_count": 100,
  "invalid_json_count": 0,
  "gemini_analysis": null
}