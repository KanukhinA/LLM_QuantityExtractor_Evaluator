{
  "timestamp": "20251223_223124",
  "model_name": "gemma-3-12b-it",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": null,
  "gpu_info": {
    "api": true
  },
  "gpu_memory_after_load_gb": 0.0,
  "gpu_memory_during_inference_gb": 0.0,
  "gpu_memory_during_inference_max_gb": 0.0,
  "gpu_memory_during_inference_min_gb": 0.0,
  "api_model": true,
  "average_response_time_seconds": 8.559378659725189,
  "parsing_error_rate": 0.01,
  "parsing_errors_count": 1,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.4386834180312441,
      "precision": 0.5871212121212122,
      "recall": 0.7142857142857143,
      "f1": 0.6444906444906445,
      "tp": 155,
      "fp": 109,
      "fn": 62,
      "количество_сравнений": 92,
      "ошибки": [
        "Вещество CI: предсказано [1.0, None], истина отсутствует",
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество P: предсказано 10.0, истина отсутствует",
        "Вещество K2O: предсказано отсутствует, истина 10.0",
        "Вещество P2O5: предсказано отсутствует, истина 10.0",
        "Вещество K: предсказано 10.0, истина отсутствует",
        "Вещество S: предсказано [None, 24.0], истина отсутствует",
        "Вещество N: предсказано [21.0, 26.0], истина отсутствует",
        "Вещество K2O: предсказано [16.0, None], истина 16.0",
        "Вещество N: предсказано [16.0, None], истина 16.0"
      ]
    },
    "прочее": {
      "средняя_точность": 0.549549168779938,
      "precision": 0.7175141242937854,
      "recall": 0.6318407960199005,
      "f1": 0.671957671957672,
      "tp": 127,
      "fp": 50,
      "fn": 74,
      "количество_сравнений": 78,
      "ошибки": [
        "Параметр масса брутто: предсказано 1035000.0, истина отсутствует",
        "Параметр масса нетто: предсказано отсутствует, истина 1035000.0",
        "Параметр масса брутто: предсказано 1584.0, истина отсутствует",
        "Параметр вес реквизита крепления: предсказано отсутствует, истина 1584.0",
        "Параметр масса стрейч-пленки: предсказано отсутствует, истина 540.0",
        "Параметр масса нетто: предсказано отсутствует, истина 20000.0",
        "Параметр количество мешков: предсказано отсутствует, истина 1000.0",
        "Параметр масса брутто: предсказано 540.0, истина 20640.0",
        "Параметр масса упаковки (мешки): предсказано отсутствует, истина 100.0",
        "Параметр марка: предсказано отсутствует, истина np(s) 20:20(14)"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 512,
    "model_name": "gemma-3-12b-it",
    "api_model": true
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n",
  "prompt_info": null,
  "parsing_errors": [
    "Текст #95: невалидный JSON. Ответ: {\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [7, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [3, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [9, null]},\n    {\"вещество\": \"S\", \"массовая доля\": 0.1},\n    {\"вещество\": \"Fe\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Mn\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Cu\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Zn\", \"массовая доля\": 0.003},\n    {\"вещество\": \"B\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Mo\", \"массовая доля\": 0.0012},\n    {\"вещество\": \"Co\", \"массовая доля\": 0.0006},\n    {\"вещество\": \"N\", \"массовая доля\": [6, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [4, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [8, null]},\n    {\"вещество\": \"S\", \"массовая доля\": 0.1},\n    {\"вещество\": \"Fe\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Mn\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Cu\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Zn\", \"массовая доля\": 0.003},\n    {\"вещество\": \"B\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Mo\", \"массовая доля\": 0.0012},\n    {\"вещество\": \"Co\", \"массовая доля\": 0.0006},\n    {\"вещество\": \"N\", \"массовая доля\": [3, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [3, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [3, null]},\n    {\"вещество\": \"S\", \"массовая доля\": 0.1},\n    {\"вещество\": \"Fe\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Mn\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Cu\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Zn\", \"массовая доля\": 0.006},\n    {\"вещество\": \"B\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Mo\", \"массовая доля\": 0.0012},\n    {\"вещество\": \"Co\", \"массовая доля\": 0.0006},\n    {\"вещество\": \"N\", \"массовая доля\": [4, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [4, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [7, null]},\n    {\"вещество\": \"S\", \"массовая доля\": 0.1},\n    {\"вещество\": \"Fe\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Mn\", \"массовая доля\": 0.06},\n    {\"вещество\": \"Cu\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Zn\", \"массовая доля\": 0.006},\n    {\"вещество\": \"B\", \"массовая доля\": 0.006},\n    {\"вещество\": \"Mo\", \"массовая доля\": 0.0012},\n    {\"вещество\": \"Co\", \"массовая доля\": 0.0006},\n    {\"веще"
  ],
  "total_samples": 100,
  "valid_json_count": 99,
  "invalid_json_count": 1
}