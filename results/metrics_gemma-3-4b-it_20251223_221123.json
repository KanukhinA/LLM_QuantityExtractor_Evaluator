{
  "timestamp": "20251223_221123",
  "model_name": "gemma-3-4b-it",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": null,
  "gpu_info": {
    "api": true
  },
  "gpu_memory_after_load_gb": 0.0,
  "gpu_memory_during_inference_gb": 0.0,
  "gpu_memory_during_inference_max_gb": 0.0,
  "gpu_memory_during_inference_min_gb": 0.0,
  "api_model": true,
  "average_response_time_seconds": 5.78238347530365,
  "parsing_error_rate": 0.03,
  "parsing_errors_count": 3,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.1255,
      "precision": 0.13071895424836602,
      "recall": 0.20725388601036268,
      "f1": 0.16032064128256512,
      "tp": 40,
      "fp": 266,
      "fn": 153,
      "количество_сравнений": 100,
      "ошибки": [
        "Вещество K2O: предсказано [45.0, 55.0], истина отсутствует",
        "Вещество K2O: предсказано 30.0, истина [29.0, 31.0]",
        "Вещество S: предсказано [1.0, 2.0], истина [2.0, None]",
        "Вещество SO4: предсказано [52.5, None], истина 52.5",
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество K2O: предсказано [50.0, None], истина 50.0",
        "Вещество CI: предсказано [1.0, None], истина отсутствует",
        "Вещество P2O5: предсказано [10.0, None], истина 10.0",
        "Вещество N: предсказано [20.0, None], истина 20.0",
        "Вещество K2O: предсказано [10.0, None], истина 10.0"
      ]
    },
    "прочее": {
      "средняя_точность": 0.3273709967008936,
      "precision": 0.4362934362934363,
      "recall": 0.565,
      "f1": 0.4923747276688453,
      "tp": 113,
      "fp": 146,
      "fn": 87,
      "количество_сравнений": 97,
      "ошибки": [
        "Параметр масса брутто: предсказано 1020.0, истина отсутствует",
        "Параметр насыпь: предсказано без упаковки, истина отсутствует",
        "Параметр внешний вид: предсказано гранулированный продукт от белого до серого или розового цвета с различными оттенками, истина отсутствует",
        "Параметр марка: предсказано npks-8, истина npks-8 (npk 8:20:30)",
        "Параметр стандарт: предсказано ту 2184-037-32496445-02, истина отсутствует",
        "Параметр стандарт: предсказано ту, истина отсутствует",
        "Параметр марка: предсказано нитроаммофоска, истина отсутствует",
        "Параметр масса брутто: предсказано 1035000.0, истина отсутствует",
        "Параметр масса нетто: предсказано отсутствует, истина 1035000.0",
        "Параметр масса брутто: предсказано 1020.0, истина отсутствует"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 512,
    "model_name": "gemma-3-4b-it",
    "api_model": true
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n",
  "prompt_info": null,
  "parsing_errors": [
    "Текст #10: невалидный JSON. Ответ: {\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [7.4, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [19.7, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [29.8, null]},\n    {\"вещество\": \"H2O\", \"массовая доля\": [1.2, null]},\n    {\"вещество\": \"S\", \"массовая доля\": [3.2, null]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса брутто\", \"масса\": 1000, \"единица\": \"кг\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"NPKS-8\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы менее 1 мм\", \"доля\": 0, \"единица\": \"%\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы от 1 до 5 мм\", \"доля\": 100, \"единица\": \"%\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы менее 6 мм\", \"доля\": 100, \"единица\": \"%\"},\n    {\"параметр\": \"массовая доля токсичных элементов\", \"значение\": \"соответствует\", \"единица\": \"мг/кг\"},\n    {\"параметр\": \"статическая прочность\", \"значение\": 5.5, \"единица\": \"мПа\"},\n    {\"параметр\": \"рассыпчатость\", \"значение\": 100, \"единица\": \"%\"}\n  ]\n}",
    "Текст #70: невалидный JSON. Ответ: {\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [5.6, null]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [17.5, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": [34.0, null]},\n    {\"вещество\": \"H2O\", \"массовая доля\": [1.6, null]},\n    {\"вещество\": \"S\", \"массовая доля\": [2.3, null]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса брутто\", \"масса\": 1000, \"единица\": \"кг\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 20.15.71-001-40782188-2021\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы менее 1 мм\", \"доля\": 0, \"единица\": \"%\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы от 1 до 5 мм\", \"доля\": 98, \"единица\": \"%\"},\n    {\"параметр\": \"гранулометрический состав\", \"частицы менее 6 мм\", \"доля\": 100, \"единица\": \"%\"},\n    {\"параметр\": \"токсичные элементы\", \"массовая доля\", \"единица\": \"мг/кг\", \"значение\": \"соответствует\"},\n    {\"параметр\": \"статическая прочность\", \"значение\": 5.3, \"единица\": \"мПа\"},\n    {\"параметр\": \"рассыпчатость\", \"значение\": 100, \"единица\": \"%\"}\n  ]\n}",
    "Текст #95: невалидный JSON. Ответ: {\n  \"массовая доля\": [\n    {\"вещество\": \"азот\", \"массовая доля\": [7, null, null, null, null, 3, 4, 3, 4, 3, 4, 33, 10, 5, 5, 7, 7, 8, 0.02, 1, 0.01, 0.05, 0.01, 0.16, 11, 0.5], \"единица\": \"%\"},\n    {\"вещество\": \"фосфор\", \"массовая доля\": [3, null, 4, null, null, 4, 3, 3, 3, 3, 5, null, 7, null, 4, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"калий\", \"массовая доля\": [9, null, 9, null, null, 9, null, 9, 3, 3, 3, null, 6, null, 7, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"сера\", \"массовая доля\": [0.1, null, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, null, null, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"железо\", \"массовая доля\": [0.06, null, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, null, null, 0.1, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"марганец\", \"массовая доля\": [0.06, null, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, null, null, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"медь\", \"массовая доля\": [0.006, null, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, null, null, 0.01, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"цинк\", \"массовая доля\": [0.003, null, 0.003, 0.003, 0.003, 0.003, 0.003, 0.003, 0.003, 0.003, 0.003, null, null, 0.02, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"бор\", \"массовая доля\": [0.006, null, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006, null, null, 0.02, null, null, null, null, null, null, null, null, null, null, null], \"единица\": \"%\"},\n    {\"вещество\": \"молибден\", \"массовая"
  ],
  "total_samples": 100,
  "valid_json_count": 97,
  "invalid_json_count": 3
}