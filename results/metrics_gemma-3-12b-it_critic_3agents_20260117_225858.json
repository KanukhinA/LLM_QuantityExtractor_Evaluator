{
  "timestamp": "20260117_225858",
  "model_name": "gemma-3-12b-it",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": "critic_3agents",
  "gpu_info": {
    "api": true
  },
  "gpu_memory_after_load_gb": 0.0,
  "gpu_memory_during_inference_gb": 0.0,
  "gpu_memory_during_inference_max_gb": 0.0,
  "gpu_memory_during_inference_min_gb": 0.0,
  "api_model": true,
  "average_response_time_seconds": 110.44294308662414,
  "parsing_error_rate": 0.0,
  "parsing_errors_count": 0,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.42575202575202575,
      "precision": 0.5687022900763359,
      "recall": 0.7028301886792453,
      "f1": 0.628691983122363,
      "tp": 149,
      "fp": 113,
      "fn": 63,
      "количество_сравнений": 91,
      "ошибки": [
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество CI: предсказано [1.0, None], истина отсутствует",
        "Вещество P2O5: предсказано [16.0, None], истина 16.0",
        "Вещество S: предсказано 16.0, истина отсутствует",
        "Вещество K2O: предсказано [16.0, None], истина 16.0",
        "Вещество N: предсказано [17.0, None], истина 17.0",
        "Вещество NH4+: предсказано [None, 2.0], истина отсутствует",
        "Вещество нерастворимого остатка: предсказано отсутствует, истина [None, 0.03]",
        "Вещество P2O5: предсказано [20.0, 21.0], истина [19.0, 21.0]",
        "Вещество N: предсказано [20.0, 21.0], истина [19.0, 21.0]"
      ]
    },
    "прочее": {
      "средняя_точность": 0.5226712587823699,
      "precision": 0.679144385026738,
      "recall": 0.6381909547738693,
      "f1": 0.6580310880829016,
      "tp": 127,
      "fp": 60,
      "fn": 72,
      "количество_сравнений": 81,
      "ошибки": [
        "Параметр вещество: предсказано нитроаммофоска (азофоска), истина отсутствует",
        "Параметр масса нетто: предсказано отсутствует, истина 1035000.0",
        "Параметр масса брутто: предсказано 1035000.0, истина отсутствует",
        "Параметр масса брутто: предсказано 1584.0, истина отсутствует",
        "Параметр вес реквизита крепления: предсказано отсутствует, истина 1584.0",
        "Параметр масса брутто: предсказано 540.0, истина 20640.0",
        "Параметр масса нетто: предсказано отсутствует, истина 20000.0",
        "Параметр масса стрейч-пленки: предсказано отсутствует, истина 540.0",
        "Параметр количество мешков: предсказано отсутствует, истина 1000.0",
        "Параметр масса упаковки (мешки): предсказано отсутствует, истина 100.0"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 512,
    "model_name": "gemma-3-12b-it",
    "api_model": true,
    "multi_agent_mode": "critic_3agents"
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "МУЛЬТИАГЕНТНЫЙ РЕЖИМ: critic_3agents\n\n================================================================================\nПРОМПТ 1: ГЕНЕРАЦИЯ ПЕРВОНАЧАЛЬНОГО ОТВЕТА\n================================================================================\n\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\n================================================================================\nПРОМПТ 2: АНАЛИЗ ОТВЕТА (КРИТИК)\n================================================================================\n\nТы — строгий и объективный эксперт-критик. Твоя задача — **только проверять соответствие ответа модели исходному промпту**, учитывая контекст тематики исходного промпта и ответа модели.  \n**Не добавляй требований, которых нет в исходном промпте.**\n### Правила анализа:\n1. Сравни **только то, что явно указано в исходном промпте**.\n2. Ошибки считаются **только если нарушено конкретное требование** из исходного промпта.\n3. **Не считай ошибкой отсутствие единиц измерения, пояснений, форматирования или данных, если они не были прямо запрошены**.\n4. **Не выдумывай ошибки** ради заполнения списка. Если всё соответствует — ошибок нет.\n### Типы возможных ошибок:\n- `\"пропущенные_данные\"` — если промпт требовал извлечь/указать конкретное значение, а его нет в ответе.\n- `\"неправильные_данные\"` — если значение в ответе противоречит информации из контекста или промпта.\n- `\"формат\"` — если промпт явно указал формат (например: \"выведи JSON\", \"используй список\"), а ответ ему не соответствует.\n- `\"логика\"` — только если промпт содержал логическое условие или вычисление, и оно выполнено неверно.\n- `\"иные требования\"` — если нарушено любое другое явное требование из промпта\n\nПосле анализа выведи блок JSON в следующем формате, после слова `ОТВЕТ:`:\n\n```json\n{\n  \"найдены_ошибки\": false,\n  \"ошибки\": []\n}\nили если есть ошибки\n{\n  \"найдены_ошибки\": true,\n  \"ошибки\": [\n    {\n      \"тип\": \"...\",\n      \"описание\": \"Кратко и точно: что именно нарушено в сравнении с промптом?\",\n      \"критичность\": \"критичная\" | \"средняя\" | \"низкая\"\n    }\n  ]\n}\n\nИсходный промпт:\n\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\nОтвет модели для оценки:\n[Пример первоначального ответа модели]\n\n\n\n================================================================================\nПРОМПТ 3: ИСПРАВЛЕНИЕ ОШИБОК (ИСПРАВИТЕЛЬ)\n================================================================================\n\nТы — эксперт-исправитель, который устраняет ошибки в ответах моделей на основе критики.\n\nТвоя задача:\n1. Получить исходный промпт, исходный ответ модели и список найденных ошибок\n2. Исправить все найденные ошибки в ответе модели\n3. Вывести исправленный ответ в том же формате, что и исходный ответ\n\nВажно:\n- Сохраняй структуру исходного ответа\n- Исправляй только найденные ошибки, не меняй корректные части\nВыведи результат в формате JSON после слова ОТВЕТ:\n\nИсходный промпт:\n\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\nИсходный ответ модели:\n[Пример первоначального ответа модели]\n\nНайденные ошибки:\n[Пример анализа критика]\n\nВыведи исправленный ответ после слова ОТВЕТ:.\n\n",
  "prompt_info": {
    "mode": "critic_3agents",
    "prompts_used": [
      "FERTILIZER_EXTRACTION_PROMPT_TEMPLATE",
      "CRITIC_PROMPT",
      "CORRECTOR_PROMPT"
    ],
    "example_generator_prompt": "\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n",
    "example_critic_prompt": "\nТы — строгий и объективный эксперт-критик. Твоя задача — **только проверять соответствие ответа модели исходному промпту**, учитывая контекст тематики исходного промпта и ответа модели.  \n**Не добавляй требований, которых нет в исходном промпте.**\n### Правила анализа:\n1. Сравни **только то, что явно указано в исходном промпте**.\n2. Ошибки считаются **только если нарушено конкретное требование** из исходного промпта.\n3. **Не считай ошибкой отсутствие единиц измерения, пояснений, форматирования или данных, если они не были прямо запрошены**.\n4. **Не выдумывай ошибки** ради заполнения списка. Если всё соответствует — ошибок нет.\n### Типы возможных ошибок:\n- `\"пропущенные_данные\"` — если промпт требовал извлечь/указать конкретное значение, а его нет в ответе.\n- `\"неправильные_данные\"` — если значение в ответе противоречит информации из контекста или промпта.\n- `\"формат\"` — если промпт явно указал формат (например: \"выведи JSON\", \"используй список\"), а ответ ему не соответствует.\n- `\"логика\"` — только если промпт содержал логическое условие или вычисление, и оно выполнено неверно.\n- `\"иные требования\"` — если нарушено любое другое явное требование из промпта\n\nПосле анализа выведи блок JSON в следующем формате, после слова `ОТВЕТ:`:\n\n```json\n{\n  \"найдены_ошибки\": false,\n  \"ошибки\": []\n}\nили если есть ошибки\n{\n  \"найдены_ошибки\": true,\n  \"ошибки\": [\n    {\n      \"тип\": \"...\",\n      \"описание\": \"Кратко и точно: что именно нарушено в сравнении с промптом?\",\n      \"критичность\": \"критичная\" | \"средняя\" | \"низкая\"\n    }\n  ]\n}\n\nИсходный промпт:\n\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\nОтвет модели для оценки:\n[Пример первоначального ответа модели]\n\n",
    "example_corrector_prompt": "\nТы — эксперт-исправитель, который устраняет ошибки в ответах моделей на основе критики.\n\nТвоя задача:\n1. Получить исходный промпт, исходный ответ модели и список найденных ошибок\n2. Исправить все найденные ошибки в ответе модели\n3. Вывести исправленный ответ в том же формате, что и исходный ответ\n\nВажно:\n- Сохраняй структуру исходного ответа\n- Исправляй только найденные ошибки, не меняй корректные части\nВыведи результат в формате JSON после слова ОТВЕТ:\n\nИсходный промпт:\n\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4 . Выводи строго JSON следующего вида (пример):\n\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3},\n    {\"вещество\": \"NH4+\", \"массовая доля\": [null, 2]}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\nИсходный ответ модели:\n[Пример первоначального ответа модели]\n\nНайденные ошибки:\n[Пример анализа критика]\n\nВыведи исправленный ответ после слова ОТВЕТ:.\n"
  },
  "parsing_errors": [],
  "total_samples": 100,
  "valid_json_count": 100,
  "invalid_json_count": 0,
  "gemini_analysis": {
    "status": "success",
    "analysis": "Приступаю к анализу результатов тестирования модели `gemma-3-12b-it`.\n\n---\n\n### Анализ результатов тестирования модели `gemma-3-12b-it`\n\n**Общие впечатления:**\nМодель демонстрирует посредственные результаты для такой специализированной задачи, особенно учитывая использование мультиагентного режима `critic_3agents`, который должен значительно повышать качество извлечения и снижать количество ошибок. F1-метрики в районе 60-65% указывают на то, что модель нуждается в существенных доработках для достижения приемлемой точности в промышленных приложениях.\n\n---\n\n#### 1. Характерные ошибки модели\n\nНа основании предоставленных метрик и примеров ошибок, можно выделить следующие характерные проблемы:\n\n*   **Низкая точность извлечения (Recall):** Модель пропускает значительное количество существующих числовых признаков (например, `Cl`, `масса нетто`, `вес реквизита крепления`). Это ведет к неполному извлечению информации.\n*   **Высокий уровень галлюцинаций и ложных срабатываний (Precision):** Модель извлекает признаки, которых нет в тексте, или неверно присваивает значения (например, `CI` с значением `1.0`, `S` с значением `16.0`, `масса брутто` с ошибочными значениями, `вещество` как параметр). Это указывает на слабое понимание контекста или чрезмерное \"фантазирование\".\n*   **Неверная интерпретация правил форматирования для диапазонов:** Модель ошибочно преобразует точные числовые значения (например, `16.0`) в формат диапазона с нижней границей (`[16.0, None]`), даже если в тексте нет явных указаний на \"не менее\". Это снижает точность представления данных.\n*   **Ошибки в семантическом сопоставлении:** Модель путает или неверно атрибутирует числовые значения, присваивая их некорректным признакам (например, `1584.0` предсказано как `масса брутто`, хотя истина — `вес реквизита крепления`).\n*   **Концептуальные ошибки:** Модель извлекает нерелевантные параметры, такие как `вещество: нитроаммофоска (азофоска)`, что не соответствует явному заданию извлекать *числовые* признаки и их *массовые доли*.\n\n---\n\n#### 2. Причины ошибок парсинга JSON\n\n**Ошибок парсинга JSON не обнаружено.**\nЭто отличный результат. Модель успешно генерирует данные в корректном JSON формате, что значительно упрощает дальнейшую обработку и позволяет сосредоточиться исключительно на качестве извлекаемых данных, а не на синтаксических проблемах.\n\n---\n\n#### 3. Причины ошибок в извлечении данных\n\n*   **Неполный или неоднозначный промпт:** Самая очевидная и критическая проблема – промпт обрывается на фразе \"Если указано например \". Незавершенная инструкция может приводить к неверному толкованию правил или их игнорированию.\n*   **Слабое понимание тонких семантических различий:** Модель испытывает трудности с различением нюансов в тексте, которые определяют принадлежность числа к конкретному признаку (например, `масса брутто` против `вес реквизита крепления`).\n*   **Чрезмерная агрессивность в применении правил:** В случае с диапазонами (`[16.0, None]` вместо `16.0`), модель, возможно, слишком буквально или широко трактует инструкцию об извлечении операторов \"не менее\"/\"не более\", применяя ее даже к точным значениям без явных операторов.\n*   **Ограниченность знаний модели о предметной области:** Gemma-3-12b-it, хотя и достаточно крупная, может не обладать достаточными специализированными знаниями для точного извлечения всех химических элементов и их контекстов, что приводит к пропускам и галлюцинациям.\n*   **Неэффективность мультиагентного режима:** Если `critic_3agents` не смог выявить и исправить такие базовые ошибки, как галлюцинации или пропуски, это означает, что либо промпты для критиков недостаточно строги или детализированы, либо критики сами ошибаются или \"соглашаются\" с некорректным начальным ответом. Критики, возможно, не сравнивают результат достаточно тщательно с исходным текстом.\n*   **Отсутствие специфических негативных примеров:** Промпт не содержит явных указаний, что *не* следует извлекать, или как разрешать конфликты между похожими числовыми значениями и их признаками.\n\n---\n\n#### 4. Рекомендации по улучшению промпта\n\n1.  **Завершить промпт:** В первую очередь, необходимо восстановить и дописать оборванную часть промпта \"Если указано например \". Это может быть критично для понимания модели.\n2.  **Уточнить правила для диапазонов и точных значений:**\n    *   Явно указать: \"Если число указано *точно* (например, '16.0%', 'масса 10 кг') без каких-либо операторов ('не менее', 'от', 'до', '+/-'), указывай только это число. Формат `[min, null]` или `[null, max]` используй *только*, если операторы явно присутствуют в тексте.\"\n    *   Добавить примеры: `16.0` -> `16.0` (не `[16.0, None]`); `не менее 16.0` -> `[16.0, null]`.\n3.  **Больше негативных примеров и уточнений для \"прочих\" признаков:**\n    *   Явно указать, что извлекаются *только численные/количественные* характеристики. \"Не извлекай общее название продукта (например, 'нитроаммофоска'), если оно не является значением числового признака или массовой долей.\"\n    *   Привести примеры, какие *прочие* признаки нужны, а какие нет. Например: \"Примеры прочих численных показателей: 'масса нетто', 'масса брутто', 'количество вагонов', 'вес реквизита крепления', 'номер ГОСТ'. Не извлекать: 'название продукта', 'описание упаковки', 'цвет'.\"\n4.  **Усилить инструкции по замене химических названий на символы:**\n    *   Предоставить более обширный список примеров: \"Заменяй названия химических элементов на их символы (например, 'Азот' -> 'N', 'Фосфор' -> 'P', 'Калий' -> 'K', 'Сера' -> 'S', 'Кальций' -> 'Ca', 'Хлор' -> 'Cl').\"\n5.  **Добавить правила приоритета/разрешения неоднозначностей:**\n    *   \"Если одно и то же число встречается в тексте и относится к нескольким возможным признакам, выбирай наиболее специфичный и точный признак, указанный рядом с числом. Например, если указано 'вес реквизита крепления 1584.0 кг' и 'масса брутто 1584.0 кг', и в контексте речь идет о реквизите, предпочти 'вес реквизита крепления'.\"\n6.  **Уточнить извлечение из марок:**\n    *   \"Извлекай массовые доли из марок (например, 'N7-P20-K30-S3') как отдельные признаки: 'массовая доля N': 7.0, 'массовая доля P2O5': 20.0, 'массовая доля K2O': 30.0, 'массовая доля S': 3.0. Если эти данные дублируются в основном тексте, используй более полные или точные данные из основного текста.\"\n\n---\n\n#### 5. Рекомендации по настройке гиперпараметров\n\n*   **`max_new_tokens`: 512.** Для задачи извлечения структурированных данных этого, как правило, достаточно. Если входные тексты очень длинные и содержат много признаков, что приводит к очень большому JSON, возможно, потребуется увеличение. Однако, судя по ошибкам, проблема не в обрыве ответа из-за длины.\n*   **`multi_agent_mode: critic_3agents`.** Это очень важный параметр. Тот факт, что ошибки все еще возникают, указывает на недостаточную эффективность критика.\n    *   **Рекомендация:** Основная настройка здесь должна касаться **промптов, которые используются для самих критиков**.\n        *   **Ужесточите промпты критиков:** Критики должны быть проинструктированы *очень детально* сравнивать каждый извлеченный признак с исходным текстом.\n        *   **Промпт критика должен включать проверки на:**\n            *   **Наличие:** Действительно ли признак и его значение присутствуют в исходном тексте? (Проверка на галлюцинации).\n            *   **Полноту:** Все ли признаки извлечены из текста? (Проверка на пропуски).\n            *   **Точность:** Правильно ли значение, единица измерения, название признака?\n            *   **Формат:** Соблюдены ли правила форматирования диапазонов и названий признаков?\n            *   **Соответствие спецификации:** Соответствует ли извлеченный признак типу \"численный/количественный\" и предметной области?\n        *   **Пример инструкции для критика (фрагмент):** \"Твоя задача — тщательно проверить ответ на предмет ошибок. В частности, проверь: 1. Нет ли в ответе признаков, которые отсутствуют в исходном тексте. 2. Извлечены ли все численные признаки из текста. 3. Правильно ли указаны диапазоны значений: `[min, null]` или `[null, max]` только при явном указании операторов 'не менее'/'не более', в остальных случаях — точное число. 4. Заменены ли названия химических элементов на их символы и приведены ли названия признаков в нижнем регистре.\"\n    *   Можно экспериментировать с количеством агентов или их специализацией (например, один критик сосредоточен на recall, другой на precision, третий на форматировании), но основной акцент — на качестве инструкций для каждого критика.\n\n---\n\n#### 6. Общие рекомендации по улучшению качества\n\n1.  **Тщательная доработка промпта:** Как указано выше, это первый и самый простой шаг. Четкий, однозначный и полный промпт значительно улучшит базовое понимание задачи моделью.\n2.  **Подготовка более разнообразного и размеченного датасета:**\n    *   Включите примеры, демонстрирующие все типы ошибок, которые модель сейчас допускает (пропуски, галлюцинации, неверное форматирование диапазонов, ошибки атрибуции).\n    *   Особое внимание уделите краевым случаям и неоднозначным формулировкам.\n    *   Включите примеры текстов, где есть похожие числа, но относящиеся к разным признакам, чтобы обучить модель контекстной дифференциации.\n3.  **Fine-tuning (дообучение) модели на специфических данных:**\n    *   Если есть возможность, дообучите `gemma-3-12b-it` (или более крупную модель) на большом и качественно размеченном датасете, содержащем тексты о химических веществах и удобрениях с целевым JSON-форматом. Это наиболее эффективный способ улучшить доменное понимание и снизить специфические ошибки.\n4.  **Разработка пост-процессинговых правил:**\n    *   Даже с улучшенной моделью, полезно иметь слой пост-обработки для исправления распространенных ошибок. Например:\n        *   Автоматическое преобразование `[X, None]` в `X`, если `X` явно указано как точное значение в исходном тексте и нет операторов \"не менее\".\n        *   Правила для разрешения конфликтов при атрибуции (например, если `масса брутто` и `вес реквизита крепления` имеют одинаковое значение, но `вес реквизита крепления` более специфичен и встречается в тексте).\n        *   Проверка на наличие \"вещество\" в извлеченных признаках и его удаление.\n5.  **Использование более мощной базовой модели:**\n    *   Если fine-tuning не дает достаточного эффекта или не является опцией, рассмотрите возможность перехода на более крупные и способные модели, такие как Llama-3-70B или GPT-4, которые, как правило, демонстрируют лучшее понимание инструкций и меньшую склонность к галлюцинациям.\n6.  **Итеративный подход:**\n    *   Внедрите цикл непрерывного улучшения: тестируйте, анализируйте ошибки, корректируйте промпт/данные для fine-tuning, повторяйте.\n\n---\nПрименение этих рекомендаций, особенно доработка промпта и усиление инструкций для критиков, должно существенно улучшить качество извлечения данных.",
    "model_used": "gemini-2.5-flash"
  }
}