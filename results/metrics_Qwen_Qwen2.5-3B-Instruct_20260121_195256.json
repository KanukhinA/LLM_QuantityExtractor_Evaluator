{
  "timestamp": "20260121_195256",
  "model_name": "Qwen/Qwen2.5-3B-Instruct",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": null,
  "gpu_info": {
    "cuda_available": true,
    "cuda_version": "12.1",
    "gpu_name": "NVIDIA GeForce RTX 4060 Laptop GPU",
    "gpu_memory_total_gb": 8.0,
    "gpu_memory_allocated_gb": 0.0,
    "gpu_memory_reserved_gb": 0.0,
    "gpu_name_detailed": "NVIDIA GeForce RTX 4060 Laptop GPU",
    "driver_version": "591.74"
  },
  "gpu_memory_after_load_gb": 5.75,
  "gpu_memory_during_inference_gb": 5.76,
  "gpu_memory_during_inference_max_gb": 5.76,
  "gpu_memory_during_inference_min_gb": 5.76,
  "api_model": false,
  "average_response_time_seconds": 42.907857346534726,
  "parsing_error_rate": 0.14,
  "parsing_errors_count": 14,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.3497584541062802,
      "precision": 0.5355191256830601,
      "recall": 0.41702127659574467,
      "f1": 0.4688995215311005,
      "tp": 98,
      "fp": 85,
      "fn": 137,
      "ошибки": [
        "Вещество К2О: предсказано 50.0, истина отсутствует",
        "Вещество P2O5: предсказано 20.0, истина [19.0, 21.0]",
        "Вещество K2O: предсказано 30.0, истина [29.0, 31.0]",
        "Вещество SO4: предсказано отсутствует, истина 52.5",
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество N: предсказано [16.5, 17.5], истина 17.0",
        "Вещество Ca: предсказано отсутствует, истина [32.0, None]",
        "Вещество NH4+: предсказано отсутствует, истина [None, 0.5]",
        "Вещество N: предсказано отсутствует, истина [14.2, None]",
        "Вещество Ca: предсказано отсутствует, истина [19.7, None]"
      ]
    },
    "прочее": {
      "средняя_точность": 0.318973442288049,
      "precision": 0.36727272727272725,
      "recall": 0.5024875621890548,
      "f1": 0.4243697478991597,
      "tp": 101,
      "fp": 174,
      "fn": 100,
      "ошибки": [
        "Параметр количество мешков: предсказано 1000.0, истина отсутствует",
        "Параметр масса брутто: предсказано 50.5, истина отсутствует",
        "Параметр масса нетто единицы: предсказано 50.0, истина отсутствует",
        "Параметр объем нетто единицы: предсказано 10.0, истина отсутствует",
        "Параметр марка: предсказано ксн-50, истина отсутствует",
        "Параметр масса брутто: предсказано 1005.0, истина 1050.0",
        "Параметр стандарт: предсказано гост 17347-79, истина отсутствует",
        "Параметр марка: предсказано сульфат калия, истина отсутствует",
        "Параметр количество мешков: предсказано 1000.0, истина отсутствует",
        "Параметр количество поддонов: предсказано 100.0, истина отсутствует"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 1024,
    "do_sample": false,
    "dtype": "bfloat16"
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "\nТы — эксперт по извлечению численных и количественных характеристик из текстов о химических веществах и удобрениях.  \nТвоя задача:  \n\n1. Найти все численные признаки в тексте, например:  \n   - Массовую долю элементов (массовая доля N, массовая доля P2O5 и др.) в процентах.  \n   - Количество товара (кг, т, п/э мешки, вагон и др.).  \n   - Прочие численные показатели, указанные в тексте (марки, стандарты (ТУ, ГОСТ и др.), идентификаторы).  \n\n2. Для каждого численного признака определить:  \n   - Название признака (например, \"массовая доля N\", \"массовая доля P2O5\", \"массовая доля К2О\", \"массовая доля S\", \"масса нетто единицы\", \"масса нетто\", \"масса K2O\", \"масса брутто\", \"количество вагонов\", \"стандарт\" и т.д.)  \n   - Значение (число, если есть диапазон — брать оба значения; для стандарта указываешь полный номер стандарта со словами ГОСТ/ТУ или др.)  \n   - Единицу измерения (%, кг, т, шт, п/э меш, вагон, или пусто для стандарта)  \n\n3. Особые указания:\n   - Извлекай на русском\n   - Если признак указан как диапазон из нескольких чисел (например \"8-10\", или \"от 6 до 12\") или с погрешностью (+/-), укажи оба числа в формате [min, max]. \n   - Извлекай логические/сравнительные операторы, если они присутствуют в тексте: «не менее» - [min, null] «не более» - [null, max]\n   - Используй точку в качестве разделителя десятичных чисел.\n   - Название вещества и его массовая доля могут встречаться в марке (например, \"N7-P20-K30-S3\"),  используй данные из марки, если нет иных данных по массовой доле вещества.\n   - Если в названии признака есть название химического элемента (например Кальций) - замени его на обозначение химического элемента - Ca.\n   - Названия признаков пиши с маленькой буквы. Например \"массовая доля Zn\".\n   - Если указано например \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - то правильным извлекаемым признаком будет \"массовая доля K2O\".\n   - Если один и тот же параметр встречается дважды — сначала как общее условие (например, «с содержанием азота более 10%»), а затем как конкретное значение (например, «азот 16%»), указывай только конкретное значение.\n   - Для массы с упаковкой - называй признак \"масса брутто\" вне зависимости от наименования упаковки. Если указывается просто масса в формате \"МЕШКИ ПО 50 КГ\" - это признак \"масса нетто\".\n   - Если дается масса в виде \"ПО 1000 КГ+5%\" - указывай в признаке \"масса брутто\" одно значение - 1050.\n   - Для прочих признаков (всех признаков, помимо \"массовой доли\") указывай единицы измерения (за исключением признаков \"марка\" и \"стандарт\")\n   - Если признака в тексте нет - не извлекай его и не выводи его в json.\n\n4. Выводи строго JSON следующего вида (пример):\n\nПример текста:\nНИТРОАММОФОСКА, УДОБРЕНИЕ МИНЕРАЛЬНОЕ, СОДЕРЖАЩЕЕ ТРИ ПИТАТЕЛЬНЫХ ЭЛЕМЕНТА - АЗОТ-27 +-1%, ФОСФОР-20% (В ПЕРЕСЧЕТЕ НА P2O5), КАЛИЙ-20% (В ПЕРЕСЧЕТЕ НА K2O), СЕРА-3%. ПОСТАВЛЯЕТСЯ В МЕШКАХ ПО 50 КГ. МАССА БРУТТО С УПАКОВКОЙ: 1020 КГ. КОЛИЧЕСТВО ПОДДОНОВ: 20 ШТ. КОЛИЧЕСТВО МЕШКОВ: 1000 ШТ. ОБЪЕМ НЕТТО ЕДИНИЦЫ: 10 Л. СООТВЕТСТВУЕТ ТУ 2184-037-32496445-02. МАРКА: N26-P20-K20-S3.\n\nПример ответа:\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": 20},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"количество поддонов\", \"количество\": 20, \"единица\": \"шт\"},\n    {\"параметр\": \"количество мешков\", \"количество\": 1000, \"единица\": \"шт\"},\n    {\"параметр\": \"объем нетто единицы\", \"объем\": 10, \"единица\": \"л\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N26-P20-K20-S3\"}\n  ]\n}\n```\n\n5. Выводи json результат **только после слова ОТВЕТ:**.\n\nТекст для анализа:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n",
  "prompt_info": null,
  "parsing_errors": [
    "Текст #7: невалидный JSON. Ответ: {\"вещество\": \"N\", \"масс",
    "Текст #11: невалидный JSON. Ответ: - МАССОВАЯ ДОЛЯ АЗОТА: 25%\n- МАССОВАЯ ДОЛЯ УГЛЕКИСЛОГО КАЛЬЦИЯ: 20%\n- МАССОВАЯ ДОЛЯ КАЛИЯ: 0%\n- МАССОВАЯ ДОЛЯ СЕРЫ: 0%\n- МАССОВАЯ ДОЛЯ ФОСФОРА: 0%\n- МАССОВАЯ ДОЛЯ КАЛЬЦИЯ: 0%\n- МАССОВАЯ ДОЛЯ КАЛИЯ: 0%",
    "Текст #19: невалидный JSON. Ответ: {\"вещество\": \"N\", \"массовая д",
    "Текст #30: невалидный JSON. Ответ: {\"параметр\": \"марка\", \"значение\": \"Концентрат гранулы\"}\n  ]\n}\n```",
    "Текст #33: невалидный JSON. Ответ: Масса нетто единицы: 50 кг. Масса брутто единицы: 51 кг. Количество упаковок: 1000 шт. Объем нетто единицы: 10 л. Содержание азота не менее 25%, фосфора не менее 2%, калия не менее 2%. Содержание азот",
    "Текст #36: невалидный JSON. Ответ: Масса брутто: 22000.00.КГ. МАССА БРУТТО С УПАКОВКОЙ: 22000.00.КГ. МАССА БРУТТО ЕДИНИЦЫ: 22000.00.КГ. МАССА БРУТТО С УПАКОВКОЙ: 22000.00.КГ. МАССА БРУТТО ЕДИНИЦЫ: 22000.00.КГ. МАССА БРУТТО С УПАКОВКОЙ:",
    "Текст #40: невалидный JSON. Ответ: {\"параметр\": \"количество поддонов\", \"количество\": null, \"едини",
    "Текст #41: невалидный JSON. Ответ: Ваш ответ корректен. Вот полный JSON:",
    "Текст #53: невалидный JSON. Ответ: {\"параметр\": \"масса нетто единицы\", \"масса\": 25, \"един",
    "Текст #60: невалидный JSON. Ответ: {\"",
    "Текст #79: невалидный JSON. Ответ: Масса нетто единицы: 45 кг. Масса брутто единицы: 47 кг. Количество упаковок: 1000 шт. Объем нетто единицы: 10 л. Содержание азота не менее 15%, фосфора не менее 7%, калия не менее 15%. Содержание азо",
    "Текст #81: невалидный JSON. Ответ: МАССОВАЯ ДОЛЯ АЗОТА: 21%.\nМАССОВАЯ ДОЛЯ КАЛИЯ В ПЕРЕСЧЕТЕ НА К2О: 21%.\nМАССОВАЯ ДОЛЯ СЕРА: 0,5%.\nМАССОВАЯ ДОЛЯ ФОСФОРА: 0,5%.\nМАССОВАЯ ДОЛЯ КАЛЬЦИЯ: 0,5%.\nМАССОВАЯ ДОЛЯ МАГНИЯ: 0,5%.\nМАССОВАЯ ДОЛЯ СЕР",
    "Текст #84: невалидный JSON. Ответ: {\"парамет",
    "Текст #94: невалидный JSON. Ответ: {\"парамет"
  ],
  "total_samples": 100,
  "valid_json_count": 86,
  "invalid_json_count": 14,
  "gemini_analysis": null
}