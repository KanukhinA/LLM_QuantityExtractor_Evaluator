{
  "timestamp": "20260110_145531",
  "model_name": "gemma-3-12b-it",
  "interrupted": false,
  "processed_count": 100,
  "total_count": 100,
  "multi_agent_mode": "simple_4agents",
  "gpu_info": {
    "api": true
  },
  "gpu_memory_after_load_gb": 0.0,
  "gpu_memory_during_inference_gb": 0.0,
  "gpu_memory_during_inference_max_gb": 0.0,
  "gpu_memory_during_inference_min_gb": 0.0,
  "api_model": true,
  "average_response_time_seconds": 0.006027274131774903,
  "parsing_error_rate": 1.0,
  "parsing_errors_count": 100,
  "quality_metrics": {
    "массовая доля": {
      "средняя_точность": 0.0,
      "precision": 0.0,
      "recall": 0.0,
      "f1": 0.0,
      "tp": 0,
      "fp": 0,
      "fn": 279,
      "количество_сравнений": 84,
      "ошибки": [
        "Вещество N: предсказано отсутствует, истина [7.0, 9.0]",
        "Вещество K2O: предсказано отсутствует, истина [29.0, 31.0]",
        "Вещество P2O5: предсказано отсутствует, истина [19.0, 21.0]",
        "Вещество S: предсказано отсутствует, истина [2.0, None]",
        "Вещество K2O: предсказано отсутствует, истина 50.0",
        "Вещество SO4: предсказано отсутствует, истина 52.5",
        "Вещество Cl: предсказано отсутствует, истина 1.0",
        "Вещество N: предсказано отсутствует, истина 20.0",
        "Вещество K2O: предсказано отсутствует, истина 10.0",
        "Вещество P2O5: предсказано отсутствует, истина 10.0"
      ]
    },
    "прочее": {
      "средняя_точность": 0.0,
      "precision": 0.0,
      "recall": 0.0,
      "f1": 0.0,
      "tp": 0,
      "fp": 0,
      "fn": 216,
      "количество_сравнений": 78,
      "ошибки": [
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.52-089-05785164-2022",
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.71-142-05015182-2017",
        "Параметр марка: предсказано отсутствует, истина npks-8 (npk 8:20:30)",
        "Параметр масса брутто: предсказано отсутствует, истина 1050.0",
        "Параметр стандарт: предсказано отсутствует, истина ту 2181-073-05761695-2016",
        "Параметр количество вагонов: предсказано отсутствует, истина 15.0",
        "Параметр масса нетто: предсказано отсутствует, истина 1035000.0",
        "Параметр марка: предсказано отсутствует, истина npk 16-16-16",
        "Параметр масса нетто единицы: предсказано отсутствует, истина 50.0",
        "Параметр стандарт: предсказано отсутствует, истина ту 20.15.71-031-00206486-2023"
      ]
    }
  },
  "hyperparameters": {
    "max_new_tokens": 512,
    "model_name": "gemma-3-12b-it",
    "api_model": true,
    "multi_agent_mode": "simple_4agents"
  },
  "prompt_template": "build_prompt3",
  "prompt_full_text": "МУЛЬТИАГЕНТНЫЙ РЕЖИМ: simple_4agents\n\n================================================================================\nПРОМПТ 1: ИЗВЛЕЧЕНИЕ ЧИСЛОВЫХ ФРАГМЕНТОВ\n================================================================================\n\nТы — эксперт по поиску числовых фрагментов в текстах о химических веществах и удобрениях.\n\nТвоя задача: найти и извлечь все фрагменты текста, которые содержат числовые значения или количественные характеристики.\n\nИщи:\n- Числа с единицами измерения (%, кг, т, шт, п/э меш, вагон, л и др.)\n- Диапазоны чисел (например, \"8-10\", \"от 6 до 12\", \"+/-0.5\")\n- Числа с операторами сравнения (\"не менее\", \"не более\", \"более\", \"менее\")\n- Марки удобрений (например, \"N7-P20-K30-S3\")\n- Стандарты (ГОСТ, ТУ и др.)\n- Любые другие числовые упоминания\n\nВАЖНО:\n- Выведи ТОЛЬКО список найденных числовых фрагментов, каждый на отдельной строке\n- НЕ выводи инструкции, объяснения или просьбы выполнить задание\n- НЕ выводи текст \"пожалуйста выполните задание\" или подобные фразы\n- Если числовых фрагментов нет, выведи ТОЛЬКО: \"Числовых фрагментов не найдено\"\n- Выведи результат сразу, без дополнительных комментариев\n\nПример текста, из которого можно извлечь числовые фрагменты:\nНИТРОАММОФОСКА(АЗОФОCКА),УДОБРЕНИЕ МИНЕРАЛЬНОЕ,СОДЕРЖАЩЕЕ ТРИ ПИТАТЕЛЬНЫХ ЭЛЕМЕНТА - АЗОТ-16% +-1%, ФОСФОР-16%,КАЛИЙ-16%,НАСЫПЬЮ. ПОСТАВЛЯЕТСЯ В МЕШКАХ ПО 50 КГ.:\n\nПример извлечения числовых фрагментов из этого текста:\nАЗОТ-16% +-1%\nФОСФОР-16%\nКАЛИЙ-16%\nВ МЕШКАХ ПО 50 КГ.\n\nТекст для извлечения числовых фрагментов:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n\n\n================================================================================\nПРОМПТ 2: ИЗВЛЕЧЕНИЕ МАССОВЫХ ДОЛЕЙ\n================================================================================\n\nТы — эксперт по извлечению массовых долей элементов из текстов об удобрениях.\n\nТвоя задача: из найденных числовых фрагментов извлечь только информацию о массовых долях химических элементов.\n\nМассовая доля может быть указана:\n- Прямо: \"массовая доля N 26%\", \"азот 16%\", \"N 26-28%\"\n- В марке: \"N7-P20-K30-S3\" означает N=7%, P2O5=20%, K2O=30%, S=3%\n- С операторами: \"не менее 10%\", \"не более 20%\"\n\nПравила:\n- Если указано \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - это \"массовая доля K2O\"\n- Если в марке указана доля - используй её, если нет прямого указания\n- Диапазоны указывай как [min, max]\n- Операторы: «не менее» - [min, null], «не более» - [null, max]\n- Названия элементов заменяй на химические обозначения (Кальций -> Ca)\n- Названия признаков пиши с маленькой буквы\n\nВыведи список найденных массовых долей в формате:\nвещество: значение (или [min, max] для диапазона)\nНапример:\nN: [16, 18]\n\nЕсли массовых долей нет, выведи \"Массовых долей не найдено\".\n\nЧисловые фрагменты для анализа:\n[Пример числовых фрагментов из предыдущего шага]\n\n\n================================================================================\nПРОМПТ 3: ИЗВЛЕЧЕНИЕ ПРОЧИХ ПАРАМЕТРОВ\n================================================================================\n\nТы — эксперт по извлечению прочих количественных параметров из текстов об удобрениях.\n\nТвоя задача: из найденных числовых фрагментов извлечь все параметры, КРОМЕ массовых долей элементов.\n\nИщи:\n- Массу нетто единицы (например, \"мешки по 50 кг\" -> масса нетто: 50 кг)\n- Массу брутто (масса с упаковкой)\n- Количество (мешков, поддонов, вагонов и др.)\n- Объем нетто единицы\n- Стандарты (ГОСТ, ТУ и др.)\n- Марки (если не использованы для массовых долей)\n\nПравила:\n- \"МЕШКИ ПО 50 КГ\" -> масса нетто: 50 кг\n- \"ПО 1000 КГ+5%\" -> масса брутто: 1050 кг\n- Для массы с упаковкой всегда \"масса брутто\"\n- Указывай единицы измерения (кроме \"марка\" и \"стандарт\")\n- Если параметра нет - не выводи его\n\nВыведи список найденных параметров в формате:\nпараметр: значение единица\n\nЕсли прочих параметров нет, выведи \"Прочих параметров не найдено\".\n\nЧисловые фрагменты для анализа:\n[Пример числовых фрагментов из предыдущего шага]\n\n\n================================================================================\nПРОМПТ 4: ФОРМИРОВАНИЕ JSON\n================================================================================\n\nТы агент, который формирует структурированный ответ в формате JSON.\n\n1. Объедини все массовые доли и прочие параметры в один JSON, строго по показанному образцу ниже.\n2. Если каких-то данных нет — выведи пустой список [] для этого поля.\n3. Все числа дай через точку, если есть десятичные.\n4. Для диапазона используй [min, max], [min, null] или [null, max].\n5. Для \"стандарт\" и \"марка\" используй поле \"значение\".\n6. Строго следуй названию каждого поля как в примере! Не добавляй ничего лишнего.\n\nПример ответа:\nОТВЕТ:\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n\nВ начале обязательно выведи: ОТВЕТ:\n\nВозьми данные для заполнения json отсюда:\n\nМассовые доли:\n{mass_fractions}\n\nПрочие параметры:\n{other_parameters}\n\n",
  "prompt_info": {
    "mode": "simple_4agents",
    "prompts_used": [
      "NUMERIC_FRAGMENTS_EXTRACTION_PROMPT",
      "MASS_FRACTION_EXTRACTION_PROMPT",
      "OTHER_PARAMETERS_EXTRACTION_PROMPT",
      "JSON_FORMATION_PROMPT"
    ],
    "example_numeric_fragments_prompt": "\nТы — эксперт по поиску числовых фрагментов в текстах о химических веществах и удобрениях.\n\nТвоя задача: найти и извлечь все фрагменты текста, которые содержат числовые значения или количественные характеристики.\n\nИщи:\n- Числа с единицами измерения (%, кг, т, шт, п/э меш, вагон, л и др.)\n- Диапазоны чисел (например, \"8-10\", \"от 6 до 12\", \"+/-0.5\")\n- Числа с операторами сравнения (\"не менее\", \"не более\", \"более\", \"менее\")\n- Марки удобрений (например, \"N7-P20-K30-S3\")\n- Стандарты (ГОСТ, ТУ и др.)\n- Любые другие числовые упоминания\n\nВАЖНО:\n- Выведи ТОЛЬКО список найденных числовых фрагментов, каждый на отдельной строке\n- НЕ выводи инструкции, объяснения или просьбы выполнить задание\n- НЕ выводи текст \"пожалуйста выполните задание\" или подобные фразы\n- Если числовых фрагментов нет, выведи ТОЛЬКО: \"Числовых фрагментов не найдено\"\n- Выведи результат сразу, без дополнительных комментариев\n\nПример текста, из которого можно извлечь числовые фрагменты:\nНИТРОАММОФОСКА(АЗОФОCКА),УДОБРЕНИЕ МИНЕРАЛЬНОЕ,СОДЕРЖАЩЕЕ ТРИ ПИТАТЕЛЬНЫХ ЭЛЕМЕНТА - АЗОТ-16% +-1%, ФОСФОР-16%,КАЛИЙ-16%,НАСЫПЬЮ. ПОСТАВЛЯЕТСЯ В МЕШКАХ ПО 50 КГ.:\n\nПример извлечения числовых фрагментов из этого текста:\nАЗОТ-16% +-1%\nФОСФОР-16%\nКАЛИЙ-16%\nВ МЕШКАХ ПО 50 КГ.\n\nТекст для извлечения числовых фрагментов:\nКАЛИЙ СЕРНОКИСЛЫЙ ИЗ НЕФЕЛИНОВОГО СЫPЬЯ ТУ 20.15.52-089-05785164-2022, ПРЕДНАЗНАЧЕН ДЛЯ ПРИМЕНЕНИЯ В КАЧЕСТВЕ МИНЕРАЛЬНОГО УДОБРЕНИЯ В СЕЛЬСКОМ ХОЗЯЙСТВЕ, ПОЛУЧАЮТ ИЗ ВЕТВИ ТЕХНОЛОГИЧЕСКОГО ПРОЦЕССА ПРОИЗВОДСТВА СОДОПРОДУКТОВ ИЗ РАСТВОРОВ ГЛИНОЗЕМНОГО ПРОИЗВОДСТВА\n",
    "example_mass_fractions_prompt": "\nТы — эксперт по извлечению массовых долей элементов из текстов об удобрениях.\n\nТвоя задача: из найденных числовых фрагментов извлечь только информацию о массовых долях химических элементов.\n\nМассовая доля может быть указана:\n- Прямо: \"массовая доля N 26%\", \"азот 16%\", \"N 26-28%\"\n- В марке: \"N7-P20-K30-S3\" означает N=7%, P2O5=20%, K2O=30%, S=3%\n- С операторами: \"не менее 10%\", \"не более 20%\"\n\nПравила:\n- Если указано \"МАССОВАЯ ДОЛЯ K В ПЕРЕСЧЕТЕ НА К2О\" - это \"массовая доля K2O\"\n- Если в марке указана доля - используй её, если нет прямого указания\n- Диапазоны указывай как [min, max]\n- Операторы: «не менее» - [min, null], «не более» - [null, max]\n- Названия элементов заменяй на химические обозначения (Кальций -> Ca)\n- Названия признаков пиши с маленькой буквы\n\nВыведи список найденных массовых долей в формате:\nвещество: значение (или [min, max] для диапазона)\nНапример:\nN: [16, 18]\n\nЕсли массовых долей нет, выведи \"Массовых долей не найдено\".\n\nЧисловые фрагменты для анализа:\n[Пример числовых фрагментов]\n",
    "example_other_parameters_prompt": "\nТы — эксперт по извлечению прочих количественных параметров из текстов об удобрениях.\n\nТвоя задача: из найденных числовых фрагментов извлечь все параметры, КРОМЕ массовых долей элементов.\n\nИщи:\n- Массу нетто единицы (например, \"мешки по 50 кг\" -> масса нетто: 50 кг)\n- Массу брутто (масса с упаковкой)\n- Количество (мешков, поддонов, вагонов и др.)\n- Объем нетто единицы\n- Стандарты (ГОСТ, ТУ и др.)\n- Марки (если не использованы для массовых долей)\n\nПравила:\n- \"МЕШКИ ПО 50 КГ\" -> масса нетто: 50 кг\n- \"ПО 1000 КГ+5%\" -> масса брутто: 1050 кг\n- Для массы с упаковкой всегда \"масса брутто\"\n- Указывай единицы измерения (кроме \"марка\" и \"стандарт\")\n- Если параметра нет - не выводи его\n\nВыведи список найденных параметров в формате:\nпараметр: значение единица\n\nЕсли прочих параметров нет, выведи \"Прочих параметров не найдено\".\n\nЧисловые фрагменты для анализа:\n[Пример числовых фрагментов]\n",
    "example_json_formation_prompt": "\nТы агент, который формирует структурированный ответ в формате JSON.\n\n1. Объедини все массовые доли и прочие параметры в один JSON, строго по показанному образцу ниже.\n2. Если каких-то данных нет — выведи пустой список [] для этого поля.\n3. Все числа дай через точку, если есть десятичные.\n4. Для диапазона используй [min, max], [min, null] или [null, max].\n5. Для \"стандарт\" и \"марка\" используй поле \"значение\".\n6. Строго следуй названию каждого поля как в примере! Не добавляй ничего лишнего.\n\nПример ответа:\nОТВЕТ:\n```json\n{\n  \"массовая доля\": [\n    {\"вещество\": \"N\", \"массовая доля\": [26, 28]},\n    {\"вещество\": \"P2O5\", \"массовая доля\": [20, null]},\n    {\"вещество\": \"K2O\", \"массовая доля\": 20},\n    {\"вещество\": \"S\", \"массовая доля\": 3}\n  ],\n  \"прочее\": [\n    {\"параметр\": \"масса нетто единицы\", \"масса\": 50, \"единица\": \"кг\"},\n    {\"параметр\": \"масса брутто\", \"масса\": 1020, \"единица\": \"кг\"},\n    {\"параметр\": \"стандарт\", \"значение\": \"ТУ 2184-037-32496445-02\"},\n    {\"параметр\": \"марка\", \"значение\": \"N7-P20-K30-S3\"}\n  ]\n}\n\nВ начале обязательно выведи: ОТВЕТ:\n\nВозьми данные для заполнения json отсюда:\n\nМассовые доли:\n{mass_fractions}\n\nПрочие параметры:\n{other_parameters}\n"
  },
  "parsing_errors": [
    "Текст #0: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #1: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #2: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #3: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #4: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #5: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #6: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #7: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #8: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #9: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #10: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #11: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #12: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #13: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #14: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #15: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #16: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #17: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #18: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #19: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #20: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #21: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #22: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #23: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #24: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #25: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #26: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #27: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #28: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #29: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #30: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #31: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #32: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #33: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #34: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #35: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #36: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #37: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #38: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #39: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #40: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #41: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #42: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #43: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #44: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #45: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #46: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #47: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #48: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #49: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #50: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #51: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #52: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #53: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #54: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #55: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #56: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #57: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #58: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #59: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #60: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #61: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #62: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #63: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #64: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #65: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #66: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #67: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #68: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #69: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #70: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #71: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #72: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #73: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #74: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #75: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #76: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #77: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #78: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #79: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #80: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #81: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #82: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #83: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #84: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #85: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #86: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #87: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #88: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #89: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #90: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #91: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #92: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #93: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #94: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #95: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #96: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #97: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #98: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'",
    "Текст #99: ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'"
  ],
  "total_samples": 100,
  "valid_json_count": 0,
  "invalid_json_count": 100,
  "gemini_analysis": {
    "status": "success",
    "analysis": "Глубокий анализ представленных результатов тестирования модели `gemma-3-12b-it` выявил критические проблемы на уровне выполнения тестовой инфраструктуры, которые полностью затмевают оценку самой языковой модели. Фактически, модель не смогла показать свои способности, поскольку процесс ее вызова завершился с ошибкой.\n\n**Общий вывод:**\nПредставленные метрики качества (все 0.00%) и примеры \"ошибок качества\" (\"предсказано отсутствует, истина...\") указывают на то, что модель **не выдала ни одного корректного ответа**, и, вероятно, даже **не произвела никакого вывода**, который мог бы быть оценен. Основной проблемой является неработоспособность мультиагентной системы, которая приводит к ошибкам выполнения до или во время обработки ответа модели.\n\n---\n\n### 1. Характерные ошибки модели\n\nНа основании предоставленных данных, невозможно в полной мере охарактеризовать ошибки самой модели `gemma-3-12b-it` по следующим причинам:\n*   **Полное отсутствие результатов:** Метрики 0.00% по всем показателям (точность, Precision, Recall, F1) свидетельствуют о том, что модель не смогла извлечь ни одного целевого фрагмента. Это не ошибка \"неправильного извлечения\", а ошибка \"отсутствия извлечения\".\n*   **Системные ошибки:** Основная причина этой проблемы, по всей видимости, кроется в ошибках выполнения мультиагентного режима, а не в способности модели понимать промпт или генерировать правильные ответы. Модель, вероятно, даже не дошла до стадии генерации осмысленного ответа или ее ответ не был корректно обработан.\n\n### 2. Причины ошибок парсинга JSON\n\nТермин \"ошибки парсинга JSON\" в данном случае вводит в заблуждение. Представленные ошибки:\n`ошибка в мультиагентном подходе. Ошибка: print_debug_info() missing 1 required positional argument: 'title'`\n— это **не ошибки парсинга JSON**, а **ошибки выполнения кода на уровне мультиагентной платформы/оркестратора**.\n\nПричины:\n*   **Программная ошибка в фреймворке:** Сообщение `missing 1 required positional argument: 'title'` означает, что функция `print_debug_info()` (которая, судя по названию, используется для отладки или логирования в мультиагентной системе) была вызвана без обязательного аргумента `title`.\n*   **Несовместимость или некорректная конфигурация:** Это может быть вызвано некорректной версией фреймворка, неправильной его инициализацией, или багом в логике, которая должна была передать этот аргумент.\n*   **Прерывание процесса:** Данная ошибка, вероятно, происходит на ранних этапах работы мультиагентной системы, прерывая весь процесс обработки запроса, включая вызов языковой модели и последующую обработку ее ответа. Именно поэтому нет никаких результатов.\n\n### 3. Причины ошибок в извлечении данных\n\nПричины ошибок в извлечении данных напрямую связаны с предыдущим пунктом:\n*   **Прерывание выполнения:** Из-за ошибки `TypeError` в мультиагентном подходе, процесс извлечения данных, вероятно, не доходит до стадии, где модель могла бы фактически выполнить задание.\n*   **Отсутствие вывода:** Система не смогла получить или обработать вывод от модели, что привело к состоянию \"предсказано отсутствует\" для всех целевых параметров.\n*   **Незавершенный промпт 2:** Отдельная, но также критичная проблема: \"ПРОМПТ 2: ИЗВЛЕЧЕНИЕ МАССОВЫХ ДОЛЕЙ\" обрывается на \"Ты — эксперт по извл\". Если этот промпт когда-либо доходил до модели, он был бы бессмысленным и невыполнимым из-за своей неполноты.\n\n### 4. Рекомендации по улучшению промпта\n\nПока не будет исправлена системная ошибка, рекомендации по промпту будут носить предварительный характер.\n\n*   **Для ПРОМПТА 1 (Извлечение числовых фрагментов):**\n    *   Промпт написан хорошо: четкая инструкция, роль, список искомых типов, негативные инструкции, примеры.\n    *   **Дополнение примеров:** Возможно, стоит добавить примеры более сложных диапазонов или формулировок, например: \"от 5 до 10 тонн\", \"плюс-минус 0.2%\", \"ГОСТ Р 52325-2005\", \"N7-P20-K30-S3\". Это поможет модели лучше генерализовать.\n    *   **Единообразие формата:** Убедиться, что целевой формат вывода (\"каждый на отдельной строке\") точно соответствует тому, что ожидает парсер для метрик.\n\n*   **Для ПРОМПТА 2 (Извлечение массовых долей):**\n    *   **КРИТИЧНО:** Немедленно доработать промпт, так как он оборван. Он должен быть полным и содержать аналогичную детализацию, как и Промпт 1 (роль, задача, что искать, формат вывода, негативные инструкции, примеры).\n    *   **Спецификация извлечения:** Для массовых долей важно четко указать, как извлекать пары \"вещество: значение\" и их форматы (например, \"АЗОТ: 16%\", \"K2O: [29.0, 31.0]\"). Если ожидается числовое значение, а не текстовое, это тоже нужно указать.\n\n### 5. Рекомендации по настройке гиперпараметров\n\n*   **`multi_agent_mode: \"simple_4agents\"`:**\n    *   Это ключевой элемент, вызывающий проблему. **Первоочередная рекомендация – отключить или полностью перепроверить реализацию данного мультиагентного режима.**\n    *   Перед тем как оценивать модель, необходимо убедиться, что тестовая инфраструктура работает стабильно.\n    *   **Тестирование в одноагентном режиме:** Запустите модель без `multi_agent_mode` (т.е. в простом, одноагентном режиме) для каждого промпта. Это позволит проверить базовую способность модели выполнять задачу и выделить проблемы, связанные именно с ее пониманием или генерацией, от проблем фреймворка.\n    *   Если мультиагентный режим необходим, его код, содержащий `print_debug_info()`, должен быть исправлен.\n\n*   **`max_new_tokens: 512`:**\n    *   Это разумное значение для извлечения фрагментов. Оно вряд ли является причиной текущих проблем.\n    *   После устранения системных ошибок, если будут замечены обрывы ответов или излишняя краткость/многословность, это значение можно будет скорректировать.\n\n### 6. Общие рекомендации по улучшению качества\n\n1.  **Исправить тестовую инфраструктуру:**\n    *   **Главный приоритет:** Устранить ошибку `print_debug_info() missing 1 required positional argument: 'title'` в мультиагентной системе. Без этого любые дальнейшие тесты и оптимизации бессмысленны.\n    *   Завершить и отладить все используемые промпты (особенно Промпт 2).\n    *   Убедиться, что логирование ошибок и парсинг вывода модели работают корректно.\n\n2.  **Установить базовую производительность модели:**\n    *   После исправления инфраструктуры, сначала протестировать модель `gemma-3-12b-it` в **одноагентном режиме** с полными и четкими промптами. Это позволит понять, насколько хорошо модель справляется с задачей сама по себе.\n\n3.  **Итерационная доработка промптов:**\n    *   На основе результатов базового теста, если модель показывает низкое качество, начать итерационное улучшение промптов:\n        *   **Дополнительные примеры:** Предоставлять больше разнообразных примеров, охватывающих крайние случаи и разные формулировки.\n        *   **Уточнение формата вывода:** Если модель не соблюдает формат (список строк, без лишних комментариев), можно добавить более строгие инструкции или даже примеры \"неправильного\" и \"правильного\" вывода.\n        *   **Few-shot learning:** Включить несколько хороших примеров в сам промпт, чтобы \"показать\" модели, как нужно отвечать.\n\n4.  **Оценка полезности мультиагентного режима:**\n    *   После того как модель будет стабильно работать в одноагентном режиме, повторно включить и протестировать мультиагентный режим. Оценить, дает ли он реальное улучшение качества для данной задачи, или только добавляет сложность и потенциальные точки отказа. Для простых задач извлечения данных сложный мультиагентный подход не всегда оправдан.\n\n5.  **Выбор модели и тонкая настройка (Long-term):**\n    *   Если даже с хорошими промптами базовая модель `gemma-3-12b-it` не справляется с задачей, можно рассмотреть:\n        *   Использование более крупной или специализированной модели.\n        *   Тонкую настройку (fine-tuning) `gemma-3-12b-it` на небольшом, но релевантном наборе данных для конкретной задачи извлечения.\n\nНа текущий момент, все усилия должны быть сосредоточены на устранении системных проблем, которые препятствуют даже базовой работе модели.",
    "model_used": "gemini-2.5-flash"
  }
}